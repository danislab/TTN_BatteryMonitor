<!DOCTYPE html>
<html>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

<script>
var container = angular.module("AdminApp", []);
container.controller("StatsController", function($scope) {
    var socket = io.connect();
    socket.on('table', function (msg) {
        console.log(msg);
        $scope.$apply(function(){
          //$scope.message = msg;
          $scope.message = JSON.parse(msg);
        });
    });
});
</script>

<script>
var app = angular.module('myApp', []);
app.controller('myCtrl', function($scope) {
    $scope.carname = "Volvo";
});
</script>

<body ng-app="AdminApp">

  <div ng-controller="StatsController">
    <h1 class="text-center">TTN_BatteryMonitor Real Time Table</h1>
    <!-- <p>Message beginnt hier > {{message}} < und hier fertig</p>  -->
    <table class="table">
      <tr>
        <th>id</th>
        <th>deviceid</th>
        <th>counter</th>
        <th>time</th>
        <th>humidity</th>
        <th>temperature</th>
      </tr>
      <tr ng-repeat="x in message">
        <td>{{ x.id }}</td>
        <td>{{ x.deviceid }}</td>
        <td>{{ x.counter }}</td>
        <td>{{ x.time }}</td>
        <td>{{ x.humidity }}</td>
        <td>{{ x.temperature }}</td>
      </tr>
    </table>
  </div>

</body>
</html>
